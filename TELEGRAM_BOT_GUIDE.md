# Telegram Bot 使用指南

## 如何在Telegram中使用金融新闻Bot

### 方法1: 通过命令行测试

#### 测试单条新闻
```bash
python telegram_news_bot.py --test
```
这会发送1条新闻到您的Telegram。

#### 使用特定命令
```bash
# 获取新闻摘要
python telegram_news_bot.py --cmd '/news'

# 获取帮助
python telegram_news_bot.py --cmd '/help'

# 只获取新浪新闻
python telegram_news_bot.py --cmd '/sina'

# 搜索关键词
python telegram_news_bot.py --cmd '/search AI'
```

### 方法2: 在Telegram聊天框中直接使用 ⭐ 推荐

#### 步骤1: 找到您的Bot
在Telegram中搜索您的Bot用户名或点击之前的对话。

#### 步骤2: 发送命令
直接在聊天框中输入以下命令：

**基础命令：**
- `/help` 或 `帮助` - 查看帮助信息
- `/news` 或 `新闻` - 获取最新新闻摘要
- `/n` - 快捷获取新闻

**自定义数量：**
- `/news5` - 获取5篇新闻
- `/news10` - 获取10篇新闻

**特定来源：**
- `/sina` 或 `新浪` - 只获取新浪财经新闻

**搜索功能：**
- `/search AI` - 搜索AI相关新闻
- `/search 股票` - 搜索股票相关新闻

**系统状态：**
- `/status` 或 `状态` - 查看系统状态

### 示例对话

```
您: /help

Bot: 📰 金融新闻Bot 使用指南

可用命令：
/news 或 新闻 - 获取最新新闻摘要
/news5 - 获取5篇新闻
/search 关键词 - 搜索新闻
/sina - 只获取新浪新闻
/status - 查看系统状态
---

您: /news

Bot: 📰 金融新闻速递
========================================
⏰ 2026-02-03 00:15
📊 成功源: 8/23
📝 总文章数: 8

【sina_finance】
🔹 央行发布最新金融政策...
   11月21日，中国人民银行发布...
---

您: /search AI

Bot: 🔍 搜索: AI
========================================
1. OpenAI发布新模型
   来源: techcrunch
   OpenAI今天发布了...

2. AI芯片需求激增
   来源: arstechnica
   随着人工智能的...
```

## 完整命令列表

| 命令 | 说明 | 示例 |
|------|------|------|
| `/help` | 显示帮助信息 | `/help` |
| `/start` | 开始使用（显示帮助） | `/start` |
| `/news` | 获取新闻摘要（默认5篇） | `/news` |
| `/news5` | 获取5篇新闻 | `/news5` |
| `/news10` | 获取10篇新闻 | `/news10` |
| `/sina` | 只获取新浪财经新闻 | `/sina` |
| `/search 关键词` | 搜索新闻 | `/search AI` |
| `/status` | 查看系统状态 | `/status` |

## 中文命令支持

Bot也支持中文命令：

- `帮助` 或 `help` - 显示帮助
- `新闻` - 获取新闻
- `新浪` - 获取新浪新闻
- `搜索 AI` - 搜索新闻
- `状态` - 查看状态

## 定时获取

如果您想定时获取新闻，可以使用之前设置的Windows定时任务：

1. 按 `Win + R` 打开运行窗口
2. 输入 `taskschd.msc` 打开任务计划程序
3. 找到 `FinanceNewsAM` (早上8点) 和 `FinanceNewsPM` (晚上6点)
4. 右键点击可以查看或运行

## 故障排除

### 问题1: Bot没有响应

**解决方案：**
1. 确认网络连接正常
2. 检查代理配置是否正确
3. 尝试使用命令行测试：`python telegram_news_bot.py --test`

### 问题2: 新闻源获取失败

**解决方案：**
1. 某些源可能暂时不可用
2. 系统会自动尝试5种不同方法
3. 使用 `/status` 查看哪些源可用

### 问题3: 消息太长被截断

**解决方案：**
- 系统会自动将长消息分批发送
- 如果还是看不到完整内容，使用 `/news5` 获取更少的新闻

## 测试确认

发送 `/news` 或 `新闻` 到您的Telegram Bot，应该能看到类似以下的回复：

```
📰 金融新闻速递
========================================
⏰ 2026-02-03 00:15
📊 成功源: 8/23
📝 总文章数: 8

【sina_finance】
🔹 某某新闻标题...
   新闻摘要内容...

========================================
```

如果您能看到这样的消息，说明Bot工作正常！
